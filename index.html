<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>和弦譜即時轉調工具</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/marked@4.0.10/marked.min.js"></script>
  <link rel="stylesheet" href="./assets/css/styles.css">
</head>
<body>
  <div class="container">
    <header>
      <h1>🎸 和弦譜即時轉調工具</h1>
      <p class="description">上傳Markdown格式的和弦譜，即時調整調性和Capo位置</p>
      <ul class="features">
        <li class="feature-tag"><i class="fas fa-upload"></i> 上傳歌譜</li>
        <li class="feature-tag"><i class="fas fa-music"></i> 即時轉調</li>
        <li class="feature-tag"><i class="fas fa-download"></i> 下載儲存</li>
        <li class="feature-tag"><i class="fas fa-file-pdf"></i> PDF匯出</li>
        <li class="feature-tag"><i class="fas fa-palette"></i> 主題切換</li>
      </ul>
    </header>

    <div class="toolbar">
      <button id="upload-btn">
        <i class="fas fa-upload"></i>
        上傳歌譜
      </button>
      <button id="download-btn">
        <i class="fas fa-download"></i>
        下載歌譜
      </button>
      <button id="export-pdf-btn">
        <i class="fas fa-file-pdf"></i>
        PDF匯出
      </button>
      <button id="theme-toggle-btn">
        <i class="fas fa-sun"></i>
        <span id="theme-text">淺色模式</span>
      </button>
      <input type="file" id="fileInput" class="file-input" accept=".md,.txt">
      
      <div class="right-buttons">
        <button id="top-toggle-btn" class="top-toggle-btn" title="隱藏標頭">
          <i class="fas fa-chevron-up"></i>
        </button>
      </div>
    </div>

    <div class="content-container">
      <div class="controls-panel">
        <div class="controls-section">
          <div class="controls-title">🎼 選擇調性 (Key)</div>
          <div class="key-buttons" id="key-buttons"></div>
        </div>

        <div class="controls-section">
          <div class="controls-title">🎸 Capo 位置</div>
          <div class="capo-buttons" id="capo-buttons"></div>
        </div>

        <div class="controls-section">
          <div class="controls-title">ℹ️ 目前設定</div>
          <div id="current-settings">
            <p>原調: <span id="original-key-display">G</span></p>
            <p>目標調: <span id="current-key-display">G</span></p>
            <p>Capo: <span id="capo-display">0</span></p>
            <p>檔案: <span id="filename-display">未選擇檔案</span></p>
          </div>
        </div>
      </div>

      <div class="preview-panel">
        <div id="preview"></div>
      </div>
    </div>

    <footer>
      <p>和弦譜轉調工具 | @2023</p>
    </footer>
  </div>

  <!-- 模態框 -->
  <div id="filenameModal" class="modal">
    <div class="modal-content">
      <span class="modal-close">&times;</span>
      <p id="modal-text">請輸入檔案名稱：</p>
      <input type="text" id="filename-input" class="modal-input" value="轉調歌譜.md" />
      <div class="modal-buttons">
        <button id="modal-ok">確定</button>
        <button id="modal-cancel" class="secondary">取消</button>
      </div>
    </div>
  </div>

  <script type="module" src="./assets/js/app.js"></script>
</body>
</html>